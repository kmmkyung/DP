<!-- @format -->

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>10시 → 12시 그림자 회전 데모</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        min-height: 300vh; /* 스크롤 공간 */
        background: #f5f5f5;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: #e5e7eb;
      }

      .scene {
        position: sticky;
        top: 0;
        width: 500px;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-end;
      }

      .label {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 12px;
        color: #9ca3af;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      /* 원기둥 (대략 비슷한 느낌) */
      .cylinder {
        position: relative;
        width: 90px;
        height: 300px;
        border-radius: 999px;
        background: linear-gradient(90deg, #facc15, #fbbf24, #f97316);
        box-shadow: 0 30px 40px rgba(0, 0, 0, 0.55);
        z-index: 3;
        bottom: 100px;
      }

      /* 그림자 영역 */
      .shadow-wrap {
        position: absolute;
        left: 50%;
        bottom: 20px;
        transform: translateX(-50%);
        width: 260px;
        height: 140px;
        pointer-events: none;
        z-index: 1;
      }

      /* 코어: 기둥 바로 밑 둥근 부분 */
      .shadow-core {
        position: absolute;
        left: 50%;
        top: 40px;
        width: 120px;
        height: 32px;
        transform: translateX(-50%);
        border-radius: 999px;
        background: radial-gradient(
          circle at 50% 40%,
          rgba(0, 0, 0, 0.9) 0%,
          rgba(0, 0, 0, 0.6) 45%,
          rgba(0, 0, 0, 0) 100%
        );
        filter: blur(3px);
        opacity: 0.9;
      }

      /* 꼬리: 길게 나가는 부분 (이걸 rotate로 돌림) */
      .shadow-tail {
        position: absolute;
        left: 50%;
        top: 40px; /* 기둥 밑 접점 */
        width: 30px; /* 세로 막대 형태 */
        height: 150px; /* scaleY로 길이 조절 */
        transform: translateX(-50%);
        transform-origin: 50% 0%; /* 윗부분을 기준으로 회전 */
        border-radius: 999px;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.75) 0%,
          rgba(0, 0, 0, 0.5) 40%,
          rgba(0, 0, 0, 0) 100%
        );
        filter: blur(8px);
        opacity: 0.9;
      }
    </style>
  </head>
  <body>
    <div class="scene">
      <div class="label">Scroll: shadow 10 o'clock → 12 o'clock</div>

      <div class="cylinder"></div>

      <div class="shadow-wrap">
        <div class="shadow-core" id="shadowCore"></div>
        <div class="shadow-tail" id="shadowTail"></div>
      </div>
    </div>

    <script>
      const core = document.getElementById("shadowCore");
      const tail = document.getElementById("shadowTail");

      function updateShadow() {
        const doc = document.documentElement;
        const max = doc.scrollHeight - window.innerHeight;
        const y = window.scrollY || 0;
        const t = max === 0 ? 0 : Math.min(Math.max(y / max, 0), 1); // 0~1

        /*
        시계 각도 기준:
        12시 = 0deg
        3시  = 90deg
        6시  = 180 / -180deg
        9시  = -90deg
        10시 = -60deg

        → 10시(-60deg) 에서 12시(0deg)까지 회전
      */
        // 100deg → 180deg 로 회전
        const startDeg = 100;
        const endDeg = 180;

        const deg = startDeg + (endDeg - startDeg) * t;

        // 적용

        // 길이: 10시일 때 길고, 12시일 때 짧게
        const maxLenScale = 1.4; // t=0
        const minLenScale = 0.4; // t=1
        const lenScale = maxLenScale + (minLenScale - maxLenScale) * t;

        // 꼬리 투명도: 정면(12시)에 가까울수록 약하게
        const maxOpacity = 0.95;
        const minOpacity = 0.3;
        const opacity = maxOpacity + (minOpacity - maxOpacity) * t;

        // 꼬리 transform 적용 (rotate + scaleY)
        tail.style.transform = `translateX(-50%) rotate(${deg}deg) scaleY(${
          lenScale * 1.4
        })`;
        tail.style.opacity = opacity.toFixed(2);

        // 코어: 정면(12시)일 때 살짝 크고 진해지게 → 더 동그래 보이게
        // const coreScale = 1 + t * 0.2; // 1 → 1.2
        // const coreOpacity = 0.75 + t * 0.15; // 0.75 → 0.9

        // core.style.transform = `translateX(-50%) scaleX(${coreScale}) scaleY(${
        //   coreScale * 0.9
        // })`;
        // core.style.opacity = coreOpacity.toFixed(2);
      }

      window.addEventListener("scroll", updateShadow);
      window.addEventListener("resize", updateShadow);
      window.addEventListener("load", updateShadow);
    </script>
  </body>
</html>
